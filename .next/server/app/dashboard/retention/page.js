(()=>{var e={};e.id=796,e.ids=[796],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},57310:e=>{"use strict";e.exports=require("url")},33521:(e,s,a)=>{"use strict";a.r(s),a.d(s,{GlobalError:()=>i.a,__next_app__:()=>h,originalPathname:()=>m,pages:()=>o,routeModule:()=>u,tree:()=>d});var t=a(67096),n=a(16132),r=a(37284),i=a.n(r),l=a(32564),c={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>l[e]);a.d(s,c);let d=["",{children:["dashboard",{children:["retention",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,60115)),"/Users/advikjaiswal/whop-lead-gen/app/dashboard/retention/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,15581)),"/Users/advikjaiswal/whop-lead-gen/app/dashboard/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(a.bind(a,10743)),"/Users/advikjaiswal/whop-lead-gen/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,9291,23)),"next/dist/client/components/not-found-error"]}],o=["/Users/advikjaiswal/whop-lead-gen/app/dashboard/retention/page.tsx"],m="/dashboard/retention/page",h={require:a,loadChunk:()=>Promise.resolve()},u=new t.AppPageRouteModule({definition:{kind:n.x.APP_PAGE,page:"/dashboard/retention/page",pathname:"/dashboard/retention",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},70680:(e,s,a)=>{Promise.resolve().then(a.bind(a,56583))},56583:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>RetentionPage});var t=a(30784),n=a(9885),r=a(89139),i=a(20644),l=a(18310),c=a(91672),d=a(50007),o=a(94409),m=a(35256),h=a(71817),u=a(69518),x=a(12029),g=a(95555),j=a(33770),p=a(20599),v=a(61890),f=a(80754),N=a(3352),w=a(89815),b=a(29137),y=a(66908),k=a(517),C=a(98699);let getChurnRiskColor=e=>{switch(e){case"low":return"text-green-600 bg-green-100 dark:bg-green-900/20 dark:text-green-400";case"medium":return"text-yellow-600 bg-yellow-100 dark:bg-yellow-900/20 dark:text-yellow-400";case"high":return"text-red-600 bg-red-100 dark:bg-red-900/20 dark:text-red-400";default:return"text-gray-600 bg-gray-100 dark:bg-gray-900/20 dark:text-gray-400"}},getStatusVariant=e=>{switch(e){case"active":return"success";case"inactive":case"at_risk":return"warning";case"churned":return"destructive";default:return"secondary"}},getChurnRiskIcon=e=>{switch(e){case"high":return t.jsx(o.Z,{className:"h-4 w-4"});case"medium":return t.jsx(h.Z,{className:"h-4 w-4"});default:return t.jsx(w.Z,{className:"h-4 w-4"})}};function MemberCard({member:e,onSendMessage:s,onViewDetails:a,className:n}){return t.jsx(r.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},whileHover:{scale:1.02},transition:{duration:.2},children:t.jsx(p.Zb,{className:(0,C.cn)("overflow-hidden hover:shadow-lg transition-shadow",n),children:(0,t.jsxs)(p.aY,{className:"p-6",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:(0,C.cn)("flex h-12 w-12 items-center justify-center rounded-full text-white text-sm font-medium",`bg-gradient-to-br ${(0,C.uI)(e.fullName||e.username||"Unknown")}`),children:(e.fullName||e.username||"U").split(" ").map(e=>e[0]).join("").toUpperCase()}),(0,t.jsxs)("div",{className:"flex-1",children:[t.jsx("h3",{className:"font-semibold text-lg",children:e.fullName||e.username||"Unknown Member"}),e.email&&t.jsx("p",{className:"text-sm text-muted-foreground",children:e.email}),e.username&&e.fullName&&(0,t.jsxs)("p",{className:"text-sm text-muted-foreground",children:["@",e.username]})]})]}),(0,t.jsxs)(f.h_,{children:[t.jsx(f.$F,{asChild:!0,children:t.jsx(g.z,{variant:"ghost",size:"icon",className:"h-8 w-8",children:t.jsx(b.Z,{className:"h-4 w-4"})})}),(0,t.jsxs)(f.AW,{align:"end",children:[t.jsx(f.Ju,{children:"Actions"}),t.jsx(f.Xi,{onClick:()=>a?.(e),children:"View Details"}),(0,t.jsxs)(f.Xi,{onClick:()=>s?.(e),children:[t.jsx(l.Z,{className:"mr-2 h-4 w-4"}),"Send Message"]}),t.jsx(f.VD,{}),t.jsx(f.Xi,{children:"View Activity"})]})]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[t.jsx(v.C,{variant:getStatusVariant(e.status),children:e.status.replace("_"," ")}),e.tier&&t.jsx(v.C,{variant:"outline",children:e.tier})]}),(0,t.jsxs)("div",{className:(0,C.cn)("flex items-center space-x-1 px-2 py-1 rounded-full text-xs font-medium",getChurnRiskColor(e.churnRisk)),children:[getChurnRiskIcon(e.churnRisk),(0,t.jsxs)("span",{children:[e.churnRisk," risk"]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[(0,t.jsxs)("div",{className:"space-y-1",children:[t.jsx("p",{className:"text-xs text-muted-foreground",children:"Engagement Score"}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[t.jsx("div",{className:"flex-1 bg-gray-200 rounded-full h-2 dark:bg-gray-700",children:t.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${100*e.engagementScore}%`}})}),(0,t.jsxs)("span",{className:"text-xs font-medium",children:[Math.round(100*e.engagementScore),"%"]})]})]}),(0,t.jsxs)("div",{className:"space-y-1",children:[t.jsx("p",{className:"text-xs text-muted-foreground",children:"Messages"}),t.jsx("p",{className:"text-sm font-medium",children:e.totalMessages})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[t.jsx(y.Z,{className:"h-4 w-4 text-muted-foreground"}),t.jsx("span",{className:"text-muted-foreground",children:"Revenue:"}),t.jsx("span",{className:"font-medium",children:e.monthlyRevenue?(0,C.xG)(e.monthlyRevenue):"N/A"})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[t.jsx(k.Z,{className:"h-4 w-4 text-muted-foreground"}),t.jsx("span",{className:"text-muted-foreground",children:"Last seen:"}),t.jsx("span",{className:"font-medium",children:e.lastLogin?(0,C.pi)(e.lastLogin):"Never"})]})]}),"high"===e.churnRisk&&t.jsx(r.E.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"mt-4 pt-4 border-t",children:(0,t.jsxs)(g.z,{size:"sm",variant:"outline",className:"w-full",onClick:()=>s?.(e),children:[t.jsx(l.Z,{className:"mr-2 h-4 w-4"}),"Send Retention Message"]})})]})})})}var R=a(24740),S=a(28176);function RetentionPage(){let[e,s]=n.useState(S.Ck),[a,w]=n.useState(""),[b,y]=n.useState("all"),[k,C]=n.useState("all"),[M,_]=n.useState(!1),Z=n.useMemo(()=>e.filter(e=>{let s=e.fullName?.toLowerCase().includes(a.toLowerCase())||e.email?.toLowerCase().includes(a.toLowerCase())||e.username?.toLowerCase().includes(a.toLowerCase()),t="all"===b||e.status===b,n="all"===k||e.churnRisk===k;return s&&t&&n}),[e,a,b,k]),A=n.useMemo(()=>{let s=e.length,a=e.filter(e=>"active"===e.status).length,t=e.filter(e=>"high"===e.churnRisk).length,n=e.filter(e=>"churned"===e.status).length,r=e.reduce((e,s)=>e+s.engagementScore,0)/e.length*100;return{total:s,active:a,atRisk:t,churned:n,retentionRate:Math.round(10*(s>0?(s-n)/s*100:0))/10,avgEngagement:Math.round(r)}},[e]),handleSyncMembers=()=>{_(!0),setTimeout(()=>{_(!1)},2e3)},handleSendMessage=e=>{console.log("Send message to:",e)},handleViewDetails=e=>{console.log("View member details:",e)};return(0,t.jsxs)("div",{className:"space-y-8",children:[(0,t.jsxs)(r.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[t.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Member Retention"}),t.jsx("p",{className:"text-muted-foreground",children:"Monitor member engagement and prevent churn with AI-powered insights."})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsxs)(g.z,{variant:"outline",size:"sm",onClick:handleSyncMembers,loading:M,children:[t.jsx(i.Z,{className:"mr-2 h-4 w-4"}),"Sync Members"]}),(0,t.jsxs)(g.z,{size:"sm",onClick:()=>{let s=e.filter(e=>"high"===e.churnRisk);console.log("Send retention campaign to",s.length,"high-risk members")},children:[t.jsx(l.Z,{className:"mr-2 h-4 w-4"}),"Retention Campaign"]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-4",children:[t.jsx(N.A,{title:"Total Members",value:A.total,icon:c.Z,format:"number"}),t.jsx(N.A,{title:"Active Members",value:A.active,change:5.2,trend:"up",icon:d.Z,format:"number"}),t.jsx(N.A,{title:"At Risk",value:A.atRisk,change:-12.5,trend:"down",icon:o.Z,format:"number"}),t.jsx(N.A,{title:"Retention Rate",value:A.retentionRate,change:2.1,trend:"up",icon:m.Z,format:"percentage"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-3",children:[t.jsx("div",{className:"lg:col-span-2",children:t.jsx(R.r,{title:"Retention Rate Trend",description:"Monthly retention rate over time",data:[{name:"Jan",value:92},{name:"Feb",value:89},{name:"Mar",value:94},{name:"Apr",value:91},{name:"May",value:88},{name:"Jun",value:93},{name:"Jul",value:95},{name:"Aug",value:92},{name:"Sep",value:89},{name:"Oct",value:94},{name:"Nov",value:96}],dataKey:"value",color:"#10b981"})}),(0,t.jsxs)(p.Zb,{children:[(0,t.jsxs)(p.Ol,{children:[t.jsx(p.ll,{children:"Quick Actions"}),t.jsx(p.SZ,{children:"Retention management shortcuts"})]}),(0,t.jsxs)(p.aY,{className:"space-y-4",children:[(0,t.jsxs)(g.z,{className:"w-full justify-start",variant:"outline",children:[t.jsx(l.Z,{className:"mr-2 h-4 w-4"}),"Send Welcome Series"]}),(0,t.jsxs)(g.z,{className:"w-full justify-start",variant:"outline",children:[t.jsx(o.Z,{className:"mr-2 h-4 w-4"}),"Alert High Risk"]}),(0,t.jsxs)(g.z,{className:"w-full justify-start",variant:"outline",children:[t.jsx(h.Z,{className:"mr-2 h-4 w-4"}),"Win-Back Campaign"]}),(0,t.jsxs)(g.z,{className:"w-full justify-start",variant:"outline",children:[t.jsx(m.Z,{className:"mr-2 h-4 w-4"}),"Engagement Report"]})]})]})]}),(0,t.jsxs)(p.Zb,{children:[(0,t.jsxs)(p.Ol,{children:[t.jsx(p.ll,{children:"Member Filters"}),t.jsx(p.SZ,{children:"Search and filter members to focus on specific segments"})]}),(0,t.jsxs)(p.aY,{children:[(0,t.jsxs)("div",{className:"flex flex-col space-y-4 md:flex-row md:items-center md:space-y-0 md:space-x-4",children:[t.jsx("div",{className:"flex-1",children:(0,t.jsxs)("div",{className:"relative",children:[t.jsx(u.Z,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),t.jsx(j.I,{placeholder:"Search members by name or email...",value:a,onChange:e=>w(e.target.value),className:"pl-10"})]})}),(0,t.jsxs)(f.h_,{children:[t.jsx(f.$F,{asChild:!0,children:(0,t.jsxs)(g.z,{variant:"outline",children:[t.jsx(x.Z,{className:"mr-2 h-4 w-4"}),"Status: ","all"===b?"All":b]})}),(0,t.jsxs)(f.AW,{children:[t.jsx(f.Ju,{children:"Filter by Status"}),t.jsx(f.VD,{}),t.jsx(f.Xi,{onClick:()=>y("all"),children:"All Statuses"}),t.jsx(f.Xi,{onClick:()=>y("active"),children:"Active"}),t.jsx(f.Xi,{onClick:()=>y("inactive"),children:"Inactive"}),t.jsx(f.Xi,{onClick:()=>y("at_risk"),children:"At Risk"}),t.jsx(f.Xi,{onClick:()=>y("churned"),children:"Churned"})]})]}),(0,t.jsxs)(f.h_,{children:[t.jsx(f.$F,{asChild:!0,children:(0,t.jsxs)(g.z,{variant:"outline",children:[t.jsx(x.Z,{className:"mr-2 h-4 w-4"}),"Risk: ","all"===k?"All":k]})}),(0,t.jsxs)(f.AW,{children:[t.jsx(f.Ju,{children:"Filter by Churn Risk"}),t.jsx(f.VD,{}),t.jsx(f.Xi,{onClick:()=>C("all"),children:"All Risk Levels"}),t.jsx(f.Xi,{onClick:()=>C("low"),children:"Low Risk"}),t.jsx(f.Xi,{onClick:()=>C("medium"),children:"Medium Risk"}),t.jsx(f.Xi,{onClick:()=>C("high"),children:"High Risk"})]})]}),(a||"all"!==b||"all"!==k)&&t.jsx(g.z,{variant:"ghost",onClick:()=>{w(""),y("all"),C("all")},children:"Clear Filters"})]}),Z.length!==e.length&&t.jsx("div",{className:"mt-4",children:(0,t.jsxs)(v.C,{variant:"secondary",children:["Showing ",Z.length," of ",e.length," members"]})})]})]}),t.jsx("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3",children:Z.map((e,s)=>t.jsx(MemberCard,{member:e,onSendMessage:handleSendMessage,onViewDetails:handleViewDetails},e.id))}),0===Z.length&&t.jsx(p.Zb,{children:(0,t.jsxs)(p.aY,{className:"flex flex-col items-center justify-center py-12 text-center",children:[t.jsx(c.Z,{className:"h-12 w-12 text-muted-foreground/50 mb-4"}),t.jsx("h3",{className:"text-lg font-medium mb-2",children:"No members found"}),t.jsx("p",{className:"text-muted-foreground mb-4",children:"Try adjusting your filters or sync with your Whop community"}),t.jsx(g.z,{onClick:handleSyncMembers,children:"Sync Members"})]})})]})}},60115:(e,s,a)=>{"use strict";a.r(s),a.d(s,{$$typeof:()=>i,__esModule:()=>r,default:()=>c});var t=a(95153);let n=(0,t.createProxy)(String.raw`/Users/advikjaiswal/whop-lead-gen/app/dashboard/retention/page.tsx`),{__esModule:r,$$typeof:i}=n,l=n.default,c=l}};var s=require("../../../webpack-runtime.js");s.C(e);var __webpack_exec__=e=>s(s.s=e),a=s.X(0,[572,123,760,88,871,589,208,74,312,861,576,352,740,890],()=>__webpack_exec__(33521));module.exports=a})();